<!DOCTYPE html>
<html>
<body style="font-family: Arial; text-align:center; margin-top:50px;">

<h2>Redirecting...</h2>
<p>Please wait...</p>

<script>
    // Deriv returns ?token1=xxxxx&token2=xxxxx etc.
    const params = new URLSearchParams(window.location.search);

    let token = null;
    for (const [key, value] of params.entries()) {
        if (key.startsWith("token")) {
            token = value;
            break;
        }
    }

    if (token) {
        localStorage.setItem("auth_token", token);
        window.location.href = "dashboard.html";
    } else {
        document.body.innerHTML = "<h3>No token received. Please login again.</h3>";
        setTimeout(() => window.location.href = "index.html", 2000);
    }
</script>

</body>
</html>